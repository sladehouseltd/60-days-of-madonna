<!DOCTYPE html>
<html lang="en-US">

<head>

	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	
	<!-- SEO -->
	<title>60 Days of Madonna</title>
	<meta name="description" content="Split is a centrally-divided layout for a professional online presence with a big image or video left with alongside content." />
	<meta name="robots" content="index, follow" />
	<meta name="referrer" content="always" />

	<!-- Social & Open Graph -->
	<meta property="og:title" content="Split - HTML Template Demo" />
	<meta property="og:description" content="Split is a centrally-divided layout for a professional online presence with a big image or video left with alongside content." />
	<meta property="og:image" content="https://demo.onepagelove.com/fullsingle-html/split/images/social.jpg"> <!-- include your hosted image full URL -->
	<meta property="og:url" content="https://demo.onepagelove.com/fullsingle-html/split/" />
	<meta name="twitter:title" content="Split - HTML Template Demo" >
	<meta name="twitter:description" content="Split is a centrally-divided layout for a professional online presence with a big image or video left with alongside content." />
	<meta name="twitter:image" content="https://demo.onepagelove.com/fullsingle-html/split/images/social.jpg" /> <!-- include your hosted image full URL -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@onepagelove" />
	<meta name="twitter:creator" content="@robhope" />

	<!-- Favicon -->
	<link rel="icon" type="image/png" href="images/favicon.png" sizes="32x32">

	<!-- Styles -->
	<link rel='stylesheet' href='assets/css/split.css' type='text/css' media='screen' />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	
	<!-- Cookie Consent Styles -->
	<style>
		#cookie-consent {
			position: fixed;
			bottom: 0;
			left: 0;
			right: 0;
			background: #061C30;
			color: #848d96;
			padding: 20px;
			text-align: center;
			z-index: 10000;
			box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
			transform: translateY(100%);
			transition: transform 0.3s ease-in-out;
		}
		
		#cookie-consent.show {
			transform: translateY(0);
		}
		
		.cookie-content {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			align-items: center;
			justify-content: space-between;
			flex-wrap: wrap;
			gap: 15px;
		}
		
		.cookie-message {
			flex: 1;
			min-width: 300px;
			text-align: left;
			font-family: 'Lora', serif;
			font-size: 18px;
			line-height: 1.6;
		}
		
		.cookie-message h4 {
			margin: 0 0 12px 0;
			font-family: 'Montserrat', sans-serif;
			font-size: 20px;
			font-weight: 600;
			color: #47bec7;
		}
		
		.cookie-buttons {
			display: flex;
			gap: 10px;
			flex-wrap: wrap;
		}
		
		.cookie-btn {
			padding: 12px 24px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-family: 'Montserrat', sans-serif;
			font-size: 16px;
			font-weight: 600;
			transition: all 0.2s ease;
		}
		
		.cookie-btn.accept {
			background: #47bec7;
			color: #061C30;
		}
		
		.cookie-btn.accept:hover {
			background: #5ac8d1;
		}
		
		.cookie-btn.decline {
			background: transparent;
			color: #848d96;
			border: 2px solid #848d96;
		}
		
		.cookie-btn.decline:hover {
			border-color: #47bec7;
			color: #47bec7;
			background: rgba(71, 190, 199, 0.1);
		}
		
		.cookie-link {
			color: #47bec7;
			text-decoration: underline;
		}
		
		.cookie-link:hover {
			color: #5ac8d1;
		}
		
		@media (max-width: 768px) {
			.cookie-content {
				flex-direction: column;
				text-align: center;
			}
			
			.cookie-message {
				text-align: center;
				min-width: auto;
			}
			
			.cookie-buttons {
				justify-content: center;
			}
		}

		/* Reset Button Styles */
		.reset-btn {
			background: #666666;
			color: white;
			border: none;
			padding: 10px 20px;
			border-radius: 5px;
			cursor: pointer;
			font-family: 'Montserrat', sans-serif;
			font-size: 14px;
			font-weight: 600;
			transition: all 0.2s ease;
			margin-top: 10px;
		}

		.reset-btn:hover {
			background: #555555;
			transform: translateY(-1px);
		}

		.reset-btn:active {
			transform: translateY(0);
		}
	</style>

	<script type="text/javascript">
	
		// Cookie Consent Management
		let cookieConsentGiven = false;
		let currentUserID = null; // Store user ID from API response
		
		function checkCookieConsent() {
			// Check if user has already given consent
			const consent = localStorage.getItem('cookieConsent');
			if (consent === 'accepted') {
				cookieConsentGiven = true;
				return true;
			} else if (consent === 'declined') {
				cookieConsentGiven = false;
				showDeclinedMessage();
				return false;
			}
			// No consent given yet, show banner
			showCookieBanner();
			return false;
		}
		
		function showCookieBanner() {
			setTimeout(() => {
				document.getElementById('cookie-consent').classList.add('show');
			}, 1000); // Show after 1 second
		}
		
		function acceptCookies() {
			localStorage.setItem('cookieConsent', 'accepted');
			cookieConsentGiven = true;
			hideCookieBanner();
			// Now load the song
			getasong();
		}
		
		function declineCookies() {
			localStorage.setItem('cookieConsent', 'declined');
			cookieConsentGiven = false;
			hideCookieBanner();
			showDeclinedMessage();
		}
		
		function hideCookieBanner() {
			document.getElementById('cookie-consent').classList.remove('show');
		}
		
		function showDeclinedMessage() {
			document.getElementById("newSong").innerHTML = "Welcome to 60 Days of Madonna!";
			document.getElementById("songsSoFar").innerHTML = "To enjoy your daily Madonna song journey, please accept cookies to track your progress.";
			document.getElementById("currentDayCount").innerHTML = "üç™";
			document.getElementById("oldDayCount").innerHTML = "0";
		}

		function getasong () {
		
			// Don't make API call if cookies not accepted
			if (!cookieConsentGiven) {
				console.log("Cookies not accepted, not making API call");
				return;
			}
		
			var xhr = new XMLHttpRequest() ;
			xhr.onreadystatechange = function() {

			if (xhr.readyState === 4) {

				if (xhr.status == 200) {

					//alert(xhr.responseText) ;
					//document.write(xhr.responseText) ;

					var response = JSON.parse(xhr.responseText) ; 

					var song = response["song"] ;

					var songsSoFar = response["allSongsForUser"]

					var currentDayCount = response["dayCount"]

					var oldDayCount = currentDayCount - 1 ;

					// Store user ID from API response
					if (response["droppedUserCookie"]) {
						currentUserID = response["droppedUserCookie"];
						console.log("Stored user ID from API:", currentUserID);
					}

					document.getElementById("newSong").innerHTML = song ;
 
					document.getElementById("songsSoFar").innerHTML = songsSoFar ;

					document.getElementById("currentDayCount").innerHTML = currentDayCount ;

					document.getElementById("oldDayCount").innerHTML = oldDayCount ;


					//document.write(song) ;

					}
				}
			}

		xhr.open("get","https://api.60daysofmadonna.com/prod/madz_get_a_song",true) ;
		xhr.withCredentials = true;
		xhr.send(null);

		} 

		function confirmReset() {
			// Don't allow reset if cookies not accepted
			if (!cookieConsentGiven) {
				alert("Please accept cookies first to use the reset feature.");
				return;
			}

			if (confirm("Are you sure you want to start over? This will delete all your previous songs and reset your progress to day 1. This action cannot be undone.")) {
				resetUserProgress();
			}
		}

		function resetUserProgress() {
			// Get user ID from cookie first, then try stored ID
			var userID = getUserIDFromCookie();
			if (!userID && currentUserID) {
				userID = currentUserID;
				console.log("Using stored user ID:", userID);
			}
			
			if (!userID) {
				alert("Error: Unable to find your user ID. Please try again.");
				return;
			}

			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4) {
					if (xhr.status == 200) {
						// Reset successful, reload the page to get fresh data
						alert("Your progress has been reset! Starting fresh from day 1.");
						location.reload();
					} else {
						alert("Error resetting your progress. Please try again.");
					}
				}
			};

			xhr.open("get", "https://api.60daysofmadonna.com/prod/madz_reset_my_songs?user=" + encodeURIComponent(userID), true);
			xhr.withCredentials = true;
			xhr.send(null);
		}

		function getUserIDFromCookie() {
			// Get all cookies
			var cookies = document.cookie.split(';');
			
			// Debug: log all cookies
			console.log("All cookies:", document.cookie);
			console.log("Cookies array:", cookies);
			
			// Find the madzCookie
			for (var i = 0; i < cookies.length; i++) {
				var cookie = cookies[i].trim();
				console.log("Checking cookie:", cookie);
				if (cookie.startsWith('madzCookie=')) {
					var userID = cookie.substring('madzCookie='.length);
					console.log("Found user ID:", userID);
					return userID;
				}
			}
			
			console.log("No madzCookie found");
			return null;
		}

	</script>

</head>

<body id="fullsingle" class="page-template-page-fullsingle-split">

<script type="text/javascript">
	
	// Initialize page - check cookie consent first
	if (checkCookieConsent()) {
		getasong();
	}

</script>

<div class="fs-split">

	<!-- Image Side -->
	<div class="split-image">

	</div>

	<!-- Content Side -->
	<div class="split-content">

		<div class="split-content-vertically-center">
		
			<div class="split-intro">
				
				<h1>Madonna</h1>

				<span class="tagline">60 Days of Madonna</span>

			</div>

			<div class="split-bio">
				
				<p>A song a day, for 60 days in celebration of Madonna's 60th birthday.</p>

			</div>

			<div class="split-bio">

				<p>Your song for day <span id="currentDayCount"></span> is:  <span id="newSong"></span></p>

			</div>

			<div class="split-bio">

				<p>Your previous <span id="oldDayCount"></span> songs are:  <span id="songsSoFar"></span></p>

			</div>

			<div class="split-bio">

				<p><button id="resetButton" class="reset-btn" onclick="confirmReset()">Start Over</button></p>

			</div>			

			<div class="split-credit">

				<p>&copy;2017 <a href="#">blueharvest.co.uk</a> - <a href="https://onepagelove.com/split">Split Template</a> by <a href="https://onepagelove.com">One Page Love</a></p>

				<!-- 
				To edit this credit you can remove the CC3.0 license for only $5 here: https://onepagelove.com/split 
				this really helps contribute towards us developing more templates and means the world to me!
				Cheers, Rob (@robhope)
				-->

			</div>		

		</div>

	</div>

</div>

<!-- Cookie Consent Banner -->
<div id="cookie-consent">
	<div class="cookie-content">
		<div class="cookie-message">
			<h4>We use cookies to enhance your experience</h4>
			<p>This site uses essential cookies to track your daily Madonna song progress and remember which songs you've received. We don't share your data with third parties or use tracking cookies. <a href="#" class="cookie-link" onclick="showPrivacyInfo()">Learn more about our privacy practices</a>.</p>
		</div>
		<div class="cookie-buttons">
			<button class="cookie-btn accept" onclick="acceptCookies()">Accept & Start Journey</button>
			<button class="cookie-btn decline" onclick="declineCookies()">Decline</button>
		</div>
	</div>
</div>

<script type="text/javascript">
function showPrivacyInfo() {
	alert(`Privacy Information:

üç™ What cookies we use:
- Essential cookies to remember your user ID
- Session cookies to track your song progress
- No advertising or tracking cookies

üìä What data we collect:
- A random user ID (no personal information)
- Which songs you've received
- Your current day count (1-60)

üîí Your privacy:
- No personal data is collected
- No data is shared with third parties
- Data is stored securely in AWS
- You can reset your progress anytime

üåç Your rights:
- You can decline cookies (but the site won't work)
- You can clear your data anytime by resetting
- No account registration required`);
}
</script>

</body>
</html>